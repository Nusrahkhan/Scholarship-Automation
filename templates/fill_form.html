<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Registration</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap');
        
        body {
            font-family: 'Poppins', sans-serif;
            background-image: url('https://i.pinimg.com/736x/ec/13/dc/ec13dc39e1f5723bb6768b8810992c7d.jpg');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            min-height: 100vh;
        }
        
        .form-container {
            background-color: rgba(255, 255, 255, 0.489); /* Translucent white */
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
            box-shadow: 0 10px 30px rgba(142, 125, 190, 0.15),
                        0 0 20px rgba(255, 255, 255, 0.5); /* White glow */
            border-radius: 1rem;
        }
        
        /* Add a subtle outer glow effect */
        .shadow-xl {
            box-shadow: 0 0 25px rgba(255, 255, 255, 0.4);
        }
        
        /* Reduce the overall container size */
        .max-w-6xl {
            max-width: 650px !important; /* Narrower form (was 900px) */
        }
        
        /* Adjust padding for the form container */
        .p-10 {
            padding: 2rem 3rem !important;
        }
        
        /* Increase text size */
        .text-3xl {
            font-size: 1.75rem !important;
        }
        
        /* Adjust spacing between form elements */
        .space-y-6 > * + * {
            margin-top: 1rem !important;
        }
        
        /* Make input fields larger */
        .py-3 {
            padding-top: 0.5rem !important;
            padding-bottom: 0.5rem !important;
        }
        
        .input-field {
            transition: all 0.3s ease;
            border: 2px solid #6f3f0e;
            background-color: rgba(255, 255, 255, 0.9);
            font-size: 1rem !important;
        }
        
        .input-field:focus {
            border-color: #33335a;
            box-shadow: 0 0 0 3px rgba(142, 125, 190, 0.2);
            background-color: rgba(255, 255, 255, 1);
        }
        
        .submit-btn {
            transition: all 0.3s ease;
            background-color: #33335a;
            padding: 0.6rem 1.5rem !important;
            font-size: 1.1rem !important;
        }
        
        .submit-btn:hover {
            background-color: #7A6BA8;
            transform: translateY(-2px);
        }
        
        /* Form header styling */
        .form-header {
            text-align: center;
            margin-bottom: 1.5rem;
        }
        
        .form-header h2 {
            color: #33335a;
            font-weight: 700;
        }
        
        .form-header p {
            color: #33335a;
            opacity: 0.7;
        }
        
        .dropdown:hover .dropdown-menu {
            display: block;
        }
        
        .dropdown-menu {
            background-color: white;
            border: 2px solid #6f3f0e;
        }
        
        .dropdown-option:hover {
            background-color: #6f3f0e;
        }
        
        /* Add a subtle overlay to improve form readability over the background image */
        .form-overlay {
            background-color: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(2px);
            -webkit-backdrop-filter: blur(2px);
            border-radius: 1.5rem;
            padding: 0.5rem !important;
        }
        
        /* Increase label size */
        label {
            font-size: 1rem !important;
            margin-bottom: 0.5rem !important;
        }
        
        /* Make form icons larger */
        .absolute.right-3.top-3 i {
            font-size: 1.1rem !important;
        }
        
         /* Form header styling with reduced spacing */
        .form-header {
            text-align: center;
            margin-bottom: 1rem; /* Reduced margin */
        }
        
        .form-header h2 {
            color: #33335a;
            font-weight: 700;
        }
        
        .form-header p {
            color: #33335a;
            opacity: 0.7;
            margin-top: 0.25rem; /* Reduced margin */
        }
        
        /* Adjust grid gap */
        .gap-4 {
            gap: 1rem !important; /* Slightly reduced gap */
        }
        
        /* Adjust body padding */
        .p-6 {
            padding: 1rem !important; /* Reduced padding */
        }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-6">
    <div class="w-full max-w-6xl overflow-hidden shadow-xl rounded-2xl" style="box-shadow: 0 0 25px rgba(255, 255, 255, 0.4);">
        <!-- Form Container (full width) -->
        <div class="w-full p-10 form-container" style="background-color: rgba(255, 255, 255, 0.8); backdrop-filter: blur(5px); -webkit-backdrop-filter: blur(5px); box-shadow: 0 10px 30px rgba(142, 125, 190, 0.15), 0 0 20px rgba(255, 255, 255, 0.5); border-radius: 1rem;">
            <div class="form-header">
                <h2 class="text-3xl mb-2">Scholarship Registration</h2>
                <p class="text-base">fill out the form</p>
            </div>
            
            <form class="w-full space-y-6">
                <!-- First row - Name and Roll No. side by side -->
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label for="name" class="block text-[#33335a] font-medium mb-1">Name</label>
                        <div class="relative">
                            <input type="text" id="name" class="w-full px-4 py-3 rounded-xl input-field focus:outline-none" placeholder="Enter your full name">
                            <div class="absolute right-3 top-3 text-[#6f3f0e]">
                                <i class="fas fa-user"></i>
                            </div>
                        </div>
                    </div>
                
                    <div>
                        <label for="roll_number" class="block text-[#33335a] font-medium mb-1">Roll Number</label>
                        <div class="relative">
                            <input type="text" id="roll_number" class="w-full px-4 py-3 rounded-xl input-field focus:outline-none" placeholder="16042X7XXXXX format">
                            <div class="absolute right-3 top-3 text-[#6f3f0e]">
                                <i class="fas fa-id-card"></i>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Second row - Branch, Student Type, and Year side by side -->
                <div class="grid grid-cols-3 gap-4">
                    <div>
                        <label for="branch" class="block text-[#33335a] font-medium mb-1">Branch</label>
                        <div class="relative">
                            <select id="branch" class="w-full px-4 py-3 rounded-xl input-field focus:outline-none appearance-none">
                                <option value="" disabled selected>Select branch   </option>
                                <option value="CSE">CSE</option>
                                <option value="IT">IT</option>
                                <option value="ECE">ECE</option>
                                <option value="EEE">EEE</option>
                                <option value="Mech">Mech</option>
                                <option value="AIML">AIML</option>
                                <option value="AIDS">AIDS</option>
                                <option value="CSE(DS)">CSE(DS)</option>
                                <option value="CSAI">CSAI</option>
                                <option value="Civil">Civil</option>
                            </select>
                            <div class="absolute right-3 top-3 text-[#33335a] pointer-events-none">
                                <i class="fas fa-chevron-down"></i>
                            </div>
                        </div>
                    </div>
                    
                    <div>
                        <label for="student-type" class="block text-[#33335a] font-medium mb-1">LE / Regular</label>
                        <div class="relative">
                            <select id="student-type" class="w-full px-4 py-3 rounded-xl input-field focus:outline-none appearance-none">
                                <option value="" disabled selected>Select type</option>
                                <option value="regular">Regular</option>
                                <option value="lateral">Lateral Entry</option>
                            </select>
                            <div class="absolute right-3 top-3 text-[#33335a] pointer-events-none">
                                <i class="fas fa-chevron-down"></i>
                            </div>
                        </div>
                    </div>
                    
                    <div>
                        <label for="year" class="block text-[#33335a] font-medium mb-1">Year of Study</label>
                        <div class="relative">
                            <select id="year" class="w-full px-4 py-3 rounded-xl input-field focus:outline-none appearance-none">
                                <option value="" disabled selected>Select year</option>
                                <option value="1">1st Year</option>
                                <option value="2">2nd Year</option>
                                <option value="3">3rd Year</option>
                                <option value="4">4th Year</option>
                            </select>
                            <div class="absolute right-3 top-3 text-[#33335a] pointer-events-none">
                                <i class="fas fa-chevron-down"></i>
                            </div>
                        </div>
                    </div>
                </div>
                
                <button type="submit" class="w-full py-3 px-4 rounded-xl text-white font-semibold submit-btn focus:outline-none">
                    Submit Registration
                    <i class="fas fa-paper-plane ml-2"></i>
                </button>
                
                <div class="text-center text-[#33335a] opacity-70 text-sm">
                    <p>Already registered? <a href="#" class="font-medium hover:underline">Login here</a></p>
                </div>
            </form>
        </div>
    </div>
    
    <script>
        // Simple form validation
        document.querySelector('form').addEventListener('submit', async function(e) {
            e.preventDefault();

            const roll_number = document.getElementById('roll_number').value.trim();
            const yearSelect = document.getElementById('year');
            const selectedYear = yearSelect.value;

            // Validate roll number format
            if (!/^16042\d{7}$/.test(roll_number)) {
                alert('Roll number must be in format 160423722001 (12 digits starting with 16042)');
                return;
            }
        
            
            // Create application ID by combining year and roll number
            const applicationId = `${selectedYear}${roll_number}`;

            // Get form values
            const formData = {
                id: applicationId,
                roll_number: roll_number,
                branch: document.getElementById('branch').value,
                year: selectedYear,
                lateral_entry: document.getElementById('student-type').value === 'lateral',
            };
            
            // Simple validation
            if (!formData.branch || !formData.year || !formData.roll_number) {
                alert('Please fill in all fields');
                return;
            }
            
            try {
                const response = await fetch('/submit_scholarship_form', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(formData)
                });

                const result = await response.json();
                
                if (result.success) {
                    // Redirect to the appropriate page based on the server response
                    window.location.href = result.redirect;
                } else {
                    alert(result.error || 'Form submission failed');
                }
            } catch (error) {
                console.error('Error:', error);
                alert('Failed to submit application');
            }
        });
    </script>
</body>
</html>
